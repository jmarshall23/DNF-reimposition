/*******************************************************************************
 * OctabrainCorpse generated by Eliot.UELib using UELib.CLI.
 * Eliot.UELib Â© 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class OctabrainCorpse extends AlienCorpse;

var() float ImpulseMag;
var() Vector TorqueVector;
var array<SSpawnActorPrefab> UnderwaterGorePrefabs;

event PostBeginPlay()
{
	super(InteractiveActor).PostBeginPlay();
	__NFUN_607__(0.1, false, 'doit');
	__NFUN_589__('Generic1', NewColorBytes(0, 0, 0), 0.1);
	StartExplodeSequence();
	return;
}

function doit()
{
	__NFUN_791__(__NFUN_263__(TorqueVector, Rotation), 3);
	return;
}

function StartExplodeSequence()
{
	// End:0x0B
	if(bFullyGibbed)
	{
		return;
	}
	VertexFunction = 1;
	VF_PhaseX = 0.4;
	VF_PhaseY = 0.5;
	VF_PhaseZ = 0.1;
	VF_Frequency = 32;
	VF_Amplitude = 0.5;
	FindAndPlaySound('Sound_TK_ExpCharge');
	__NFUN_607__(__NFUN_226__(1.25, 0.25), false, 'Explode');
	return;
}

function Explode()
{
	__NFUN_608__('ExplodeSequenceJitter');
	FindAndStopSound('Sound_TK_ExpCharge');
	FindAndPlaySound('Sound_TK_Explode');
	// End:0x29
	if(bFullyGibbed)
	{
		return;
	}
	HurtRadius(125, Location, 350, 75, class'ExplosionDamage', Location, 0.6, true);
	bDamageCouldGib = true;
	Gib(125, Location, __NFUN_232__(0, 0, 1), class'ExplosionDamage');
	VertexFunction = 0;
	return;
}

simulated function bool DamageTypeCanGib(class<DamageType> DamageType)
{
	// End:0x10
	if(super(CorpseBase).DamageTypeCanGib(DamageType))
	{
		return true;
	}
	// End:0x3C
	if(__NFUN_150__(__NFUN_357__(DamageType, class'ShotgunDamage'), __NFUN_357__(DamageType, class'BulletDamage')))
	{
		bDamageCouldGib = true;
		return true;
	}
	return false;
	return;
}

function bool Gib(int nDamage, Vector vDamageOrigin, Vector vDamageDir, class<DamageType> cDamageClass, optional PlayerPawn Instigator, optional Vector DamageOrigin)
{
	local int i;
	local Corpse_Gib Gib;
	local Vector Dir;

	__NFUN_1028__(nDamage, vDamageOrigin, vDamageDir, cDamageClass, Instigator, DamageOrigin);
	i = __NFUN_166__(string(SpawnedLimbs), 1);
	J0x30:

	// End:0xCA [Loop If]
	if(__NFUN_172__(i, 0))
	{
		Dir = __NFUN_255__();
		Dir.Z = __NFUN_211__(Dir.Z);
		Gib = SpawnedLimbs[i];
		Gib.__NFUN_820__(__NFUN_234__(Dir, ImpulseMag));
		Gib.__NFUN_601__('Generic1', NewColorBytes(0, 0, 0));
		Gib.__NFUN_601__('Generic0', NewColorBytes(0, 0, 0));
		__NFUN_185__(i);
		// [Loop Continue]
		goto J0x30;
	}
	// End:0x109
	if(__NFUN_145__(CanSpawnBloodyMess()))
	{
		i = 0;
		J0xDC:

		// End:0x109 [Loop If]
		if(__NFUN_169__(i, string(UnderwaterGorePrefabs)))
		{
			__NFUN_836__(UnderwaterGorePrefabs[i], ThisFrameDamage);
			__NFUN_184__(i);
			// [Loop Continue]
			goto J0xDC;
		}
	}
	return;
}

function bool CanSpawnBloodyMess()
{
	// End:0x1F
	if(__NFUN_340__(PhysicsVolume, none))
	{
		return __NFUN_145__(PhysicsVolume.bWaterVolume);
	}
	return false;
	return;
}

event RegisterPrecacheComponents(PrecacheIndex PrecacheIndex)
{
	local int i;

	super(CorpseBase).RegisterPrecacheComponents(PrecacheIndex);
	PrecacheIndex.__NFUN_1277__(VoicePack, 'Sound_TK_ExpCharge');
	PrecacheIndex.__NFUN_1277__(VoicePack, 'Sound_TK_Explode');
	i = __NFUN_166__(string(UnderwaterGorePrefabs), 1);
	J0x48:

	// End:0x9C [Loop If]
	if(__NFUN_172__(i, 0))
	{
		PrecacheIndex.__NFUN_1266__(UnderwaterGorePrefabs[i].SpawnClass);
		PrecacheIndex.__NFUN_1267__(Primitive(UnderwaterGorePrefabs[i].RenderObject));
		__NFUN_185__(i);
		// [Loop Continue]
		goto J0x48;
	}
	return;
}

defaultproperties
{
	TorqueVector=(X=1.298303E-41,Y=3.773024E-17,Z=-50)
}