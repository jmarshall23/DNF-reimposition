/*******************************************************************************
 * EnergyLeech_Boss_HurtRadiusSensor generated by Eliot.UELib using UELib.CLI.
 * Eliot.UELib Â© 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class EnergyLeech_Boss_HurtRadiusSensor extends KSphereSensor
	dependson(EnergyLeech_Boss);

const kDistFactor = 1.5f;
const kSquirtFactor = 1000.0f;

var EnergyLeech_Boss Leech;
var float FrameDamageTime;
var float FrameDamage;
var bool SensorEnabled;

simulated function bool VerifySelf()
{
	Leech = EnergyLeech_Boss(MountParent);
	// End:0x1E
	if(__NFUN_339__(Leech, none))
	{
		return false;
	}
	return super(Actor).VerifySelf();
	return;
}

function CopyOwnerProperties()
{
	return;
}

simulated event TakeDamage(Pawn Instigator, float Damage, Vector DamageOrigin, Vector DamageDirection, class<DamageType> DamageType, optional name HitBoneName, optional Vector DamageStart)
{
	// End:0x14
	if(__NFUN_145__(__NFUN_357__(DamageType, class'ExplosionDamage')))
	{
		return;
	}
	// End:0x3C
	if(__NFUN_205__(FrameDamageTime, Level.GameTimeSeconds))
	{
		__NFUN_209__(FrameDamage, Damage);		
	}
	else
	{
		FrameDamage = Damage;
	}
	// End:0x7A
	if(__NFUN_148__(__NFUN_340__(Leech, none), __NFUN_340__(Instigator, Leech)))
	{
		Leech.NoteSensorDamaged(FrameDamage);
	}
	return;
}

event BeginSenseObject(KarmaActor Actor)
{
	super(KSensor).BeginSenseObject(Actor);
	bNoNativeTick = false;
	TickStyle = 3;
	// End:0x57
	if(__NFUN_148__(Actor.bIsPlayerPawn, __NFUN_340__(Leech, none)))
	{
		Leech.SensedPlayer(self, PlayerPawn(Actor));
	}
	return;
}

event EndSenseObject(KarmaActor Actor)
{
	super(KSensor).EndSenseObject(Actor);
	// End:0x27
	if(__NFUN_339__(__NFUN_1122__(false, false), none))
	{
		TickStyle = 0;
		bNoNativeTick = true;
	}
	return;
}

simulated event Tick(float DeltaSeconds)
{
	local array<SKarmaInteraction> SensedActors;
	local int i;
	local Vector Offset, Direction;
	local float Dist, Intensity, CurrentVel, DesiredVel;
	local PlayerPawn P;

	super(Actor).Tick(DeltaSeconds);
	// End:0x18
	if(__NFUN_145__(SensorEnabled))
	{
		return;
	}
	SensedActors = __NFUN_1123__();
	i = __NFUN_166__(string(SensedActors), 1);
	J0x30:

	// End:0x16C [Loop If]
	if(__NFUN_172__(i, 0))
	{
		// End:0x162
		if(__NFUN_148__(__NFUN_340__(SensedActors[i].Actor, none), SensedActors[i].Actor.bIsPlayerPawn))
		{
			P = PlayerPawn(SensedActors[i].Actor);
			Offset = __NFUN_239__(P.Location, Location);
			// End:0xCD
			if(__NFUN_200__(Offset.Z, 0))
			{
				Offset.Z = 0;
			}
			Dist = __NFUN_251__(Offset);
			Intensity = __NFUN_196__(__NFUN_199__(1.5, __NFUN_227__(__NFUN_196__(Dist, SphereSensorRadius), 0, 1.5)), 1.5);
			DesiredVel = __NFUN_195__(Intensity, 1000);
			Direction = __NFUN_253__(Offset);
			// End:0x162
			if(__NFUN_200__(__NFUN_244__(P.Velocity, Direction), DesiredVel))
			{
				__NFUN_249__(P.GameplayDesiredPhysicsVelocity, __NFUN_235__(DesiredVel, Direction));
			}
		}
		__NFUN_185__(i);
		// [Loop Continue]
		goto J0x30;
	}
	return;
}

defaultproperties
{
	SensorEnabled=true
	SphereSensorRadius=96
	OnlySenseClasses=/* Array type was not detected. */
	Anim_PopOutVaultMachinegun=3
	Ident[14081]=
/* Exception thrown while deserializing Ident
System.IO.EndOfStreamException: Unable to read beyond the end of the stream.
   at System.IO.BinaryReader.ReadByte()
   at UELib.UnrealReader.ReadIndex() in E:\SteamLibrary\steamapps\common\DukeNukem\Tools\UnrealscriptDecompiler\UnrealStream.cs:line 268
   at UELib.UObjectStream.ReadObject() in E:\SteamLibrary\steamapps\common\DukeNukem\Tools\UnrealscriptDecompiler\UnrealStream.cs:line 742
   at UELib.Core.UDefaultProperty.DeserializeDefaultPropertyValue(PropertyType type, DeserializeFlags& deserializeFlags) in E:\SteamLibrary\steamapps\common\DukeNukem\Tools\UnrealscriptDecompiler\Core\Classes\UDefaultProperty.cs:line 515 */
}