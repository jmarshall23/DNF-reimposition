/*******************************************************************************
 * UDukeLocalFact generated by Eliot.UELib using UELib.CLI.
 * Eliot.UELib Â© 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class UDukeLocalFact extends UDukeServerListFactory
	config;

var UDukeLocalLink Link;
var config string BeaconProduct;
var config int ServerBeaconPort;

function Query(optional bool bBySuperset, optional bool bInitial)
{
	super.Query(bBySuperset, bInitial);
	Owner = PingedList;
	Owner.Owner.PingFinished();
	Link = GetPlayerOwner().__NFUN_560__().__NFUN_615__(class'UDukeLocalLink');
	Link.BeaconProduct = BeaconProduct;
	Link.ServerBeaconPort = ServerBeaconPort;
	Link.OwnerFactory = self;
	Link.Start();
	return;
}

function UDukeServerList FoundServer(string IP, int QueryPort, string Category, string GameName, optional string HostName)
{
	local UDukeServerList l;

	l = super.FoundServer(IP, QueryPort, Category, GameName);
	l.bLocalServer = true;
	// End:0x73
	if(__NFUN_145__(l.bPinging))
	{
		l.PingServer(true, true, Owner.Owner.bNoSort);
	}
	return l;
	return;
}

function QueryFinished(bool bSuccess, optional string ErrorMsg)
{
	Link.__NFUN_614__();
	Link = none;
	super.QueryFinished(bSuccess, ErrorMsg);
	Owner.Owner.PingFinished();
	return;
}

function Shutdown(optional bool bBySuperset)
{
	// End:0x20
	if(__NFUN_340__(Link, none))
	{
		Link.__NFUN_614__();
		Link = none;
	}
	super.Shutdown(bBySuperset);
	return;
}

defaultproperties
{
	BeaconProduct="dnf"
	ServerBeaconPort=8777
	bIncrementalPing=true
}