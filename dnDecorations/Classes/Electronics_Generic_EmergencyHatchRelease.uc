/*******************************************************************************
 * Electronics_Generic_EmergencyHatchRelease generated by Eliot.UELib using UELib.CLI.
 * Eliot.UELib Â© 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class Electronics_Generic_EmergencyHatchRelease extends Electronics_Generic
	collapsecategories;

var bool bClosed;
var() name ButtonPressEvent;

function PostVerifySelf()
{
	super(dnDecoration).PostVerifySelf();
	bClosed = true;
	DecoActivity(0, 'ClosedIdle');
	return;
}

event Used(Actor Other, Pawn EventInstigator)
{
	super(dnDecoration).Used(Other, EventInstigator);
	// End:0x47
	if(bClosed)
	{
		bUsable = false;
		__NFUN_607__(0.3, false, 'PerformOpen');
		EventInstigator.HandQuickAction('HandQuickAction_SlideSwitch_Right');		
	}
	else
	{
		DecoActivity(0, 'PushButton');
		EventInstigator.HandQuickAction('HandQuickAction_Switch_PushButton');
		GlobalTrigger(ButtonPressEvent);
	}
	return;
}

simulated function PerformOpen()
{
	DecoActivity(0, 'Open');
	return;
}

simulated event AnimEndEx(SAnimEndInfo AnimEndInfo)
{
	super(dnDecoration).AnimEndEx(AnimEndInfo);
	// End:0x57
	if(__NFUN_150__(__NFUN_341__(AnimEndInfo.AnimName, 'closed_2_open'), __NFUN_341__(AnimEndInfo.AnimName, 'button_press')))
	{
		DecoActivity(0, 'OpenIdle');
		bUsable = true;
		bClosed = false;		
	}
	else
	{
		// End:0x81
		if(__NFUN_341__(AnimEndInfo.AnimName, 'open_2_closed'))
		{
			DecoActivity(0, 'ClosedIdle');
			bClosed = true;
		}
	}
	return;
}

event RegisterPrecacheComponents(PrecacheIndex PrecacheIndex)
{
	super(dnDecoration).RegisterPrecacheComponents(PrecacheIndex);
	PrecacheIndex.__NFUN_1281__('HandQuickAction_SlideSwitch_Right');
	PrecacheIndex.__NFUN_1281__('HandQuickAction_Switch_PushButton');
	PrecacheIndex.__NFUN_1277__(VoicePack, 'EHR_ButtonPress');
	PrecacheIndex.__NFUN_1277__(VoicePack, 'EHR_PanelClose');
	PrecacheIndex.__NFUN_1277__(VoicePack, 'EHR_PanelOpen');
	return;
}

defaultproperties
{
	DecoActivities_Default(0)=(ActivityData=(bInitialized=false,CurrentIndex=0,NextPerformTime=0,NextPerformTime_Failure=0),ActivityIDScript=(ClosedIdle),ActivityID=none,ActivityMethod=0,ActivityStates_Success=none,ActivityStates_Failure=none,ActivityDebugID="",Activities=((ActivityRules=none,ActivityElements=(DecoActivities_Animation'Electronics_Generic_EmergencyHatchRelease.DA_Anim_EHR_Idle_Closed'),ActivitySetup=(bDisabled=false,bPerformedThisRound=false,PerformedCounter=0,LoopCount=0,PerformAgainDelay=0),FailureActivityElements=none,FailureActivitySetup=(bDisabled=false,bPerformedThisRound=false,PerformedCounter=0,LoopCount=0,PerformAgainDelay=0))),bDisabled=false)
	DecoActivities_Default(1)=(ActivityData=(bInitialized=false,CurrentIndex=0,NextPerformTime=0,NextPerformTime_Failure=0),ActivityIDScript=(OpenIdle),ActivityID=none,ActivityMethod=0,ActivityStates_Success=none,ActivityStates_Failure=none,ActivityDebugID="",Activities=((ActivityRules=none,ActivityElements=(DecoActivities_Animation'Electronics_Generic_EmergencyHatchRelease.DA_Anim_EHR_Idle_Open'),ActivitySetup=(bDisabled=false,bPerformedThisRound=false,PerformedCounter=0,LoopCount=0,PerformAgainDelay=0),FailureActivityElements=none,FailureActivitySetup=(bDisabled=false,bPerformedThisRound=false,PerformedCounter=0,LoopCount=0,PerformAgainDelay=0))),bDisabled=false)
	DecoActivities_Default(2)=(ActivityData=(bInitialized=false,CurrentIndex=0,NextPerformTime=0,NextPerformTime_Failure=0),ActivityIDScript=(Open),ActivityID=none,ActivityMethod=0,ActivityStates_Success=none,ActivityStates_Failure=none,ActivityDebugID="",Activities=((ActivityRules=none,ActivityElements=(DecoActivities_Animation'Electronics_Generic_EmergencyHatchRelease.DA_Anim_EHR_Open'),ActivitySetup=(bDisabled=false,bPerformedThisRound=false,PerformedCounter=0,LoopCount=0,PerformAgainDelay=0),FailureActivityElements=none,FailureActivitySetup=(bDisabled=false,bPerformedThisRound=false,PerformedCounter=0,LoopCount=0,PerformAgainDelay=0))),bDisabled=false)
	DecoActivities_Default(3)=(ActivityData=(bInitialized=false,CurrentIndex=0,NextPerformTime=0,NextPerformTime_Failure=0),ActivityIDScript=(Close),ActivityID=none,ActivityMethod=0,ActivityStates_Success=none,ActivityStates_Failure=none,ActivityDebugID="",Activities=((ActivityRules=none,ActivityElements=(DecoActivities_Animation'Electronics_Generic_EmergencyHatchRelease.DA_Anim_EHR_Close'),ActivitySetup=(bDisabled=false,bPerformedThisRound=false,PerformedCounter=0,LoopCount=0,PerformAgainDelay=0),FailureActivityElements=none,FailureActivitySetup=(bDisabled=false,bPerformedThisRound=false,PerformedCounter=0,LoopCount=0,PerformAgainDelay=0))),bDisabled=false)
	DecoActivities_Default(4)=(ActivityData=(bInitialized=false,CurrentIndex=0,NextPerformTime=0,NextPerformTime_Failure=0),ActivityIDScript=(PushButton),ActivityID=none,ActivityMethod=0,ActivityStates_Success=none,ActivityStates_Failure=none,ActivityDebugID="",Activities=((ActivityRules=none,ActivityElements=(DecoActivities_Animation'Electronics_Generic_EmergencyHatchRelease.DA_Anim_EHR_Button_Press'),ActivitySetup=(bDisabled=false,bPerformedThisRound=false,PerformedCounter=0,LoopCount=0,PerformAgainDelay=0),FailureActivityElements=none,FailureActivitySetup=(bDisabled=false,bPerformedThisRound=false,PerformedCounter=0,LoopCount=0,PerformAgainDelay=0))),bDisabled=false)
	HealthPrefab=0
	bUsable=true
	UsePhrase="<?int?dnDecorations.Electronics_Generic_EmergencyHatchRelease.UsePhrase?>"
	bBlockKarma=false
	DrawType=2
	Mesh='c_generic.Elevator_box'
}